<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navi Soch - ‡§∏‡§∞‡§≤. ‡§≠‡§∞‡•ã‡§∏‡•á‡§Æ‡§Ç‡§¶. ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è.</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-brown: #7A5C3A;
            --primary-brown: #7A5C3A;
            --terracotta: #C07A45;
            --sand: #F5EFE6;
            --cream: #FFFDF8;
            --text-dark: #2B2118;
            --muted-taupe: #7C6F64;
            --success-olive: #6B8A4C;
            --error-red: #D73027;
            --border-light: rgba(199, 160, 122, 0.3);
        }

        body {
            font-family: 'Noto Sans Devanagari', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--deep-brown);
            background: url(./bg.jpg);
            min-height: 100vh;
            font-size: 16px;
        }

        /* Grain texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url(./bg.jpg);
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 2;
        }

        /* Header */
        .header {
            display: flex;
            background: linear-gradient(135deg, var(--primary-brown) 0%, var(--deep-brown) 100%);
            color: var(--cream);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 20px rgba(94, 69, 42, 0.3);
            padding-right:30px;
            
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            padding-left: 70px;
            
        }

.logo {
    position: fixed;    
    top: 10px;
    left: 10px;
    z-index: 1000;      
}

.logo img {
    height: 50px;
    width: auto;
}


        .language-switcher {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 4px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .lang-btn {
            background: none;
            border: none;
            color: var(--cream);
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .lang-btn.active,
        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            opacity: 1;
        }

        .voice-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--cream);
            padding: 10px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .voice-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Navigation */
        .nav-bar {
            background: var(--sand);
            border-bottom: 1px solid var(--border-light);
            position: sticky;
            top: 60px;
            z-index: 99;
        }

        .nav-content {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding: 10px 0;
        }

        .nav-btn {
            background: none;
            border: 2px solid transparent;
            color: var(--text-dark);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: var(--primary-brown);
            color: var(--cream);
            border-color: var(--primary-brown);
            transform: translateY(-2px);
        }

        /* Main content areas */
        .screen {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Landing Screen */
        .landing {
            background: linear-gradient(135deg, var(--sand) 0%, var(--cream) 50%, var(--sand) 100%);
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .landing::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%237A5C3A' fill-opacity='0.05'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm10 0c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.3;
            z-index: -1;
        }

        .landing-content h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--cream);
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(122, 92, 58, 0.1);
        }

        .landing-content .tagline {
            font-size: 1.5rem;
            color: var(--cream);
            margin-bottom: 2rem;
            font-weight: 500;
        }

        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .btn-primary, .btn-secondary {
            padding: 16px 32px;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            min-width: 180px;
        }

        .btn-primary {
            background: var(--primary-brown);
            color: var(--cream);
        }

        .btn-primary:hover {
            background: var(--deep-brown);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(122, 92, 58, 0.3);
        }

        .btn-secondary {
            background: var(--deep-brown);
            color: var(--sand);
            border-color: var(--deep-brown);
        }

        .btn-secondary:hover {
            background: var(--primary-brown);
            color: var(--cream);
            transform: translateY(-3px);
        }

        .trust-footer {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .trust-chip {
            background: rgba(122, 92, 58, 0.1);
            color: var(--cream);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        /* Dashboard */
        .dashboard-greeting {
            background: linear-gradient(135deg, var(--success-olive) 0%, var(--primary-brown) 100%);
            color: var(--cream);
            padding: 2rem;
            border-radius: 16px;
            margin: 2rem 0;
            box-shadow: 0 8px 30px rgba(122, 92, 58, 0.2);
        }

        .dashboard-greeting h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .location-chip {
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            display: inline-block;
            margin-top: 10px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--cream);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(122, 92, 58, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--terracotta), var(--primary-brown));
            border-radius: 16px 16px 0 0;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(122, 92, 58, 0.2);
        }

        .feature-card h3 {
            color: var(--primary-brown);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .feature-card p {
            color: var(--muted-taupe);
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .feature-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .action-btn {
            background: var(--sand);
            color: var(--text-dark);
            border: 1px solid var(--border-light);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: var(--primary-brown);
            color: var(--cream);
            border-color: var(--primary-brown);
        }

        .action-btn.primary {
            background: var(--terracotta);
            color: var(--cream);
            border-color: var(--terracotta);
        }

        /* Forms and inputs */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: var(--text-dark);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-light);
            border-radius: 12px;
            background: var(--cream);
            color: var(--text-dark);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-brown);
            box-shadow: 0 0 0 3px rgba(122, 92, 58, 0.1);
        }

        /* OTP Screen */
        .otp-container {
            max-width: 400px;
            margin: 2rem auto;
            padding: 2rem;
            background: var(--cream);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(122, 92, 58, 0.15);
        }

        .phone-input-container {
            position: relative;
            margin-bottom: 1rem;
        }

        .voice-helper {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--primary-brown);
            cursor: pointer;
            font-size: 20px;
        }

        .otp-boxes {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 2rem 0;
        }

        .otp-box {
            width: 50px;
            height: 50px;
            border: 2px solid var(--border-light);
            border-radius: 12px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-dark);
            background: var(--cream);
        }

        .otp-box:focus {
            outline: none;
            border-color: var(--primary-brown);
            box-shadow: 0 0 0 3px rgba(122, 92, 58, 0.1);
        }

        /* Marketplace styles */
        .marketplace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 2rem 0 1rem 0;
        }

        .search-bar {
            flex: 1;
            max-width: 400px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 40px;
            border: 2px solid var(--border-light);
            border-radius: 25px;
            background: var(--cream);
            font-size: 16px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-brown);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--cream);
        }

        .cart-btn {
            background: var(--terracotta);
            color: var(--cream);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            transition: all 0.3s ease;
        }

        .cart-btn:hover {
            background: var(--primary-brown);
            transform: translateY(-2px);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--error-red);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .filters {
            display: flex;
            gap: 10px;
            margin: 1rem 0 2rem 0;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .filter-btn {
            background: var(--sand);
            border: 2px solid var(--border-light);
            color: var(--text-dark);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--primary-brown);
            color: var(--cream);
            border-color: var(--primary-brown);
            transform: translateY(-2px);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .product-card {
            background: var(--cream);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(122, 92, 58, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 35px rgba(122, 92, 58, 0.2);
        }

        .product-image {
            width: 100%;
            height: 160px;
            background: var(--sand);
            border-radius: 12px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success-olive);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .product-info h3 {
            font-size: 1.3rem;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .product-description {
            color: var(--muted-taupe);
            margin-bottom: 1rem;
            line-height: 1.5;
            font-size: 14px;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--success-olive);
            margin-bottom: 1rem;
        }

        .price-unit {
            font-size: 1rem;
            color: var(--muted-taupe);
            font-weight: normal;
        }

        .product-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--sand);
            border-radius: 12px;
            padding: 8px;
        }

        .quantity-btn {
            background: var(--primary-brown);
            color: var(--cream);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.2s ease;
        }

        .quantity-btn:hover {
            background: var(--deep-brown);
            transform: scale(1.1);
        }

        .quantity-display {
            min-width: 30px;
            text-align: center;
            font-weight: 600;
            color: var(--text-dark);
        }

        .add-to-cart {
            flex: 1;
            background: var(--terracotta);
            color: var(--cream);
            border: none;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .add-to-cart:hover {
            background: var(--primary-brown);
            transform: translateY(-2px);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                padding: 1rem 0 0.5rem 0;
            }

            .nav-content {
                justify-content: flex-start;
                padding: 5px 0;
            }

            .landing-content h1 {
                font-size: 2.5rem;
            }

            .landing-content .tagline {
                font-size: 1.2rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn-primary, .btn-secondary {
                width: 100%;
                max-width: 280px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        /* Voice bot indicator */
        .voice-bot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--primary-brown);
            color: var(--cream);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(122, 92, 58, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .voice-bot:hover {
            background: var(--deep-brown);
            transform: scale(1.1);
        }

        .voice-bot.listening {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Success/Error messages */
        .toast {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--success-olive);
            color: var(--cream);
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(107, 138, 76, 0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1001;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: var(--error-red);
        }

        /* Loading states */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(122, 92, 58, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-brown);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Hidden by default */
        .hidden { display: none !important; }
        .h2
        {
            color:var(--cream)
        }
    </style>
</head>
<body>
    <!-- Toast notifications -->
    <div id="toast" class="toast"></div>

    <!-- Voice Bot -->
    <button id="voiceBot" class="voice-bot" title="Voice Assistant">üé§</button>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
    <img src="./Final_logo_navi_soch_extra_clean.png" alt="Navi Soch Logo">
</div>

                
                <div class="language-switcher">
                    <button class="lang-btn active" onclick="setLanguage('hi')">‡§π‡§ø</button>
                    <button class="lang-btn" onclick="setLanguage('en')">EN</button>
                    <button class="lang-btn" onclick="setLanguage('ta')">Ta</button>
                    <button class="lang-btn" onclick="setLanguage('bn')">‡¶¨‡¶æ‡¶Ç</button>
                    <button class="lang-btn" onclick="setLanguage('mr')">‡§Æ‡§∞‡§æ</button>
                </div>
                
                <button class="voice-toggle" onclick="toggleVoice()">
                    üîä <span id="voiceStatus">Voice ON</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="container">
            <div class="nav-content">
                <button class="nav-btn active" onclick="showScreen('landing')">Home</button>
                <button class="nav-btn" onclick="showScreen('marketplace')">Marketplace</button>
                <a href="page.html">
                <button class="nav-btn" >Legal & Schemes</button></a>
                <button class="nav-btn" onclick="showScreen('finance')">Finance</button>
                <button class="nav-btn" onclick="showScreen('cyber')">Cyber Safety</button>
                <a href="Community.html">
                <button class="nav-btn" >Community</button></a>
                <button class="nav-btn" onclick="showScreen('elocker')">eLocker</button>
                <button class="nav-btn" onclick="showScreen('settings')">Settings</button>
            </div>
        </div>
    </nav>

    <!-- Landing Screen -->
    <div id="landing" class="screen active">
        <div class="landing">
            <div class="container">
                <div class="landing-content">
                    <h1>Navi Soch</h1>
                    <p class="tagline">‡§∏‡§∞‡§≤. ‡§≠‡§∞‡•ã‡§∏‡•á‡§Æ‡§Ç‡§¶. ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è.</p>
                    
                    <div class="cta-buttons">
                        <button class="btn-primary" onclick="startLogin()">Start Now</button>
                        <button class="btn-secondary" onclick="showDemo()">See How It Works</button>
                    </div>
                    
                    <div class="trust-footer">
                        <span class="trust-chip">üì± Works offline (PWA)</span>
                        <span class="trust-chip">üìû SMS/IVR support</span>
                        <span class="trust-chip">üîí Secure & Safe</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- OTP Login Screen -->
    <div id="otp-login" class="screen">
        <div class="container">
            <div class="otp-container">
                <h2 style="text-align: center; color: var(--primary-brown); margin-bottom: 2rem;">Login / ‡§∏‡§æ‡§á‡§® ‡§á‡§®</h2>
                
                <div class="form-group">
                    <label class="form-label">Mobile Number / ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
                    <div class="phone-input-container">
                        <input type="tel" id="phoneInput" class="form-input" placeholder="Enter 10-digit mobile number">
                        <button class="voice-helper" onclick="startVoiceInput()">üé§</button>
                    </div>
                    <small style="color: var(--muted-taupe);">Voice input enabled ‚Ä¢ Screen-reader & IVR friendly</small>
                </div>
                
                <button class="btn-primary" style="width: 100%; margin-bottom: 1rem;" onclick="sendOTP()" disabled id="getOtpBtn">Get OTP</button>
                
                <div id="otpSection" class="hidden">
                    <label class="form-label">Enter OTP / ‡§ì‡§ü‡•Ä‡§™‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</label>
                    <div class="otp-boxes">
                        <input type="text" class="otp-box" maxlength="1" oninput="moveToNext(this, 1)">
                        <input type="text" class="otp-box" maxlength="1" oninput="moveToNext(this, 2)">
                        <input type="text" class="otp-box" maxlength="1" oninput="moveToNext(this, 3)">
                        <input type="text" class="otp-box" maxlength="1" oninput="moveToNext(this, 4)">
                        <input type="text" class="otp-box" maxlength="1" oninput="moveToNext(this, 5)">
                        <input type="text" class="otp-box" maxlength="1" oninput="moveToNext(this, 6)">
                    </div>
                    
                    <div style="text-align: center; margin: 1rem 0;">
                        <span id="resendTimer">Resend OTP in 30s</span>
                        <button id="resendBtn" class="hidden" style="background: none; border: none; color: var(--primary-brown); cursor: pointer; text-decoration: underline;" onclick="resendOTP()">Resend OTP</button>
                        <br>
                        <button style="background: none; border: none; color: var(--terracotta); cursor: pointer; text-decoration: underline; margin-top: 10px;" onclick="callForOTP()">üìû Call me with OTP (IVR)</button>
                    </div>
                    
                    <button class="btn-primary" style="width: 100%;" onclick="verifyOTP()">Verify & Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard" class="screen">
        <div class="container">
            <div class="dashboard-greeting">
                <h2>‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§∞‡§Æ‡•Ç ‡§≠‡•à‡§Ø‡§æ!</h2>
                <p>Welcome back to your farming assistant</p>
                <span class="location-chip">üìç Auto-detected: Bengaluru, Karnataka</span>
            </div>

            <div class="features-grid">
                <!-- My Crops -->
                <div class="feature-card">
                    <h3>üå± My Crops / ‡§Æ‡•á‡§∞‡•Ä ‡§´‡§∏‡§≤‡•á‡§Ç</h3>
                    <p>Manage your crops, track growth, and monitor health</p>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="showScreen('marketplace')">View</button>
                        <button class="action-btn" onclick="addNewCrop()">+ Add Crop</button>
                    </div>
                </div>

                <!-- Marketplace -->
                <div class="feature-card">
                    <h3>üõí Marketplace / ‡§¨‡§æ‡§ú‡§æ‡§∞</h3>
                    <p>Direct farmer-to-buyer platform with fair pricing</p>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="showScreen('marketplace')">View Offers</button>
                        <button class="action-btn" onclick="showSmartPrice()">Smart Price</button>
                        <button class="action-btn" onclick="bookTransport()">Book Transport</button>
                        <button class="action-btn" onclick="coldStorage()">Cold Storage</button>
                        <button class="action-btn" onclick="digitalContract()">Digital Contract</button>
                    </div>
                </div>

                <!-- Schemes & Legal -->
                <div class="feature-card">
                    <h3>üìã Schemes & Legal / ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h3>
                    <p>Government schemes, legal help, and fraud protection</p>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="showScreen('legal')">Check Eligibility</button>
                        <button class="action-btn" onclick="applyScheme()">Apply Now</button>
                        <button class="action-btn" onclick="trackApplication()">Track My Application</button>
                        <button class="action-btn" onclick="learnRights()">Learn My Rights</button>
                        <button class="action-btn" onclick="reportScam()">Report Scam</button>
                    </div>
                </div>

                <!-- Financial Planner -->
                <div class="feature-card">
                    <h3>üí∞ Financial Planner / ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§Ø‡•ã‡§ú‡§®‡§æ</h3>
                    <p>Profit forecasting, loans, and financial planning</p>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="showScreen('finance')">Profit Forecast</button>
                        <button class="action-btn" onclick="compareLoans()">Compare Loans</button>
                        <button class="action-btn" onclick="savingsLessons()">Savings & Insurance Lessons</button>
                    </div>
                    <div style="background: rgba(215, 48, 39, 0.1); color: var(--error-red); padding: 10px; border-radius: 8px; margin-top: 10px; font-size: 14px;">
                        ‚ö†Ô∏è Cost exceeds profit - Consider price renegotiation
                    </div>
                </div>

                <!-- Cyber Safety -->
                <div class="feature-card">
                    <h3>üîí Cyber Safety / ‡§∏‡§æ‡§á‡§¨‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</h3>
                    <p>Protect yourself from online frauds and scams</p>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="showScreen('cyber')">Spot the Scam</button>
                        <button class="action-btn" onclick="verifyUPI()">Verify UPI</button>
                        <button class="action-btn" onclick="safetyCourse()">Safety Course</button>
                        <button class="action-btn" onclick="protectedBrowser()">Protected Browser</button>
                    </div>
                </div>

                <!-- Community -->
                <div class="feature-card">
                    <h3>üë• Community / ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</h3>
                    <p>Connect with other farmers and experts</p>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="showScreen('community')">Ask a Question</button>
                        <button class="action-btn" onclick="uploadDiseasePhoto()">Upload Disease Photo</button>
                        <button class="action-btn" onclick="weatherAlerts()">Weather & Bhuvan Alerts</button>
                        <button class="action-btn" onclick="expertQA()">Weekly Expert Q&A</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Marketplace Screen -->
    <div id="marketplace" class="screen">
        <div class="container">
            <div class="marketplace-header">
                <h2 style="color: var(--cream);">Marketplace / ‡§¨‡§æ‡§ú‡§æ‡§∞</h2>
                <div class="search-bar">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search crops... / ‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç...">
                </div>
                <button class="cart-btn" onclick="toggleCart()">
                    üõí Cart
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>

            <div class="filters">
                <button class="filter-btn active" onclick="filterProducts('all')">All / ‡§∏‡§≠‡•Ä</button>
                <button class="filter-btn" onclick="filterProducts('leafy')">Leafy Greens / ‡§™‡§§‡•ç‡§§‡•á‡§¶‡§æ‡§∞</button>
                <button class="filter-btn" onclick="filterProducts('root')">Root Vegetables / ‡§ú‡§°‡§º‡•á‡§Ç</button>
                <button class="filter-btn" onclick="filterProducts('fruit')">Fruits / ‡§´‡§≤</button>
                <button class="filter-btn" onclick="filterProducts('herbs')">Herbs / ‡§ú‡§°‡§º‡•Ä-‡§¨‡•Ç‡§ü‡•Ä</button>
            </div>

            <div class="products-grid" id="productsGrid">
                <!-- Products will be dynamically generated here -->
            </div>
        </div>
    </div>

    <!-- Legal & Schemes Screen -->
    <div id="legal" class="screen">
        <div class="container" style="padding-top: 2rem;">
            <h2 style="color: var(--cream); margin-bottom: 2rem;">Legal & Government Schemes / ‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§î‡§∞ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h3>‚úÖ Check Eligibility / ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç</h3>
                    <p>Find out which government schemes you qualify for</p>
                    <div class="feature-actions">
                        <button class="action-btn primary">PM-Kisan</button>
                        <button class="action-btn">Fasal Bima</button>
                        <button class="action-btn">Soil Health Card</button>
                        <button class="action-btn">KCC Loan</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üìù Applications / ‡§Ü‡§µ‡•á‡§¶‡§®</h3>
                    <p>Apply for schemes and track your application status</p>
                    <div class="feature-actions">
                        <button class="action-btn primary">Apply Now</button>
                        <button class="action-btn">Track My Application</button>
                        <button class="action-btn">Documents Required</button>
                        <button class="action-btn">Send to My Phone</button>
                    </div>
                    
                    <div style="margin-top: 1rem; padding: 1rem; background: var(--sand); border-radius: 8px; color: var(--deep-brown) ";>
                        <strong>Application Timeline:</strong><br>
                        ‚úÖ Received ‚Üí üîÑ In Process ‚Üí ‚è≥ Approved/Rejected
                    </div>
                </div>

                <div class="feature-card">
                    <h3>‚öñÔ∏è Learn My Rights / ‡§Ö‡§™‡§®‡•á ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§ú‡§æ‡§®‡•á‡§Ç</h3>
                    <p>Understand your legal rights as a farmer</p>
                    <div class="feature-actions">
                        <button class="action-btn primary">Land Rights</button>
                        <button class="action-btn">Tenancy Laws</button>
                        <button class="action-btn">Contract Farming</button>
                        <button class="action-btn">MSP Guidelines</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üÜò Get Help Now / ‡§Ö‡§≠‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§™‡§æ‡§è‡§Ç</h3>
                    <p>Connect with legal helpers and report issues</p>
                    <div class="feature-actions">
                        <button class="action-btn primary">Talk to Legal Helper</button>
                        <button class="action-btn">Report Scam</button>
                        <button class="action-btn">View Flagged Frauds</button>
                        <button class="action-btn">Emergency Contact</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Finance Screen -->
    <div id="finance" class="screen">
        <div class="container" style="padding-top: 2rem;">
            <h2 style="color: var(--cream); margin-bottom: 2rem;">Financial & Investment Planner / ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ï‡§æ‡§∞</h2>
            
            <div class="feature-card" style="margin-bottom: 2rem; background: linear-gradient(135deg, var(--success-olive), var(--primary-brown)); color: var(--cream);">
                <h3 style="color: var(--cream);">üìä Profit Forecast / ‡§≤‡§æ‡§≠ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 1rem 0;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold;">‚Çπ45,000</div>
                        <div>Expected Revenue</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold;">‚Çπ28,000</div>
                        <div>Input Costs</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold;">‚Çπ17,000</div>
                        <div>Net Profit</div>
                    </div>
                </div>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <h3>üè¶ Compare Loans / ‡§ã‡§£ ‡§§‡•Å‡§≤‡§®‡§æ</h3>
                    <p>Find the best loan options for your farming needs</p>
                    <div style="margin: 1rem 0;">
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-light);">
                            <span>SBI Kisan Credit Card</span>
                            <strong style="color: var(--success-olive);">7% APR</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-light);">
                            <span>HDFC Agriculture Loan</span>
                            <strong style="color: var(--success-olive);">7.5% APR</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span>Local Co-operative</span>
                            <strong style="color: var(--success-olive);">6.5% APR</strong>
                        </div>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Apply</button>
                        <button class="action-btn">Request Callback</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üìö Learning Center / ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞</h3>
                    <p>Learn about savings, insurance, and financial planning</p>
                    <div class="feature-actions">
                        <button class="action-btn primary">Savings Basics</button>
                        <button class="action-btn">Insurance Guide</button>
                        <button class="action-btn">Investment Tips</button>
                        <button class="action-btn">Budget Planning</button>
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span>Course Progress</span>
                            <span>60%</span>
                        </div>
                        <div style="background: var(--sand); height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: var(--success-olive); width: 60%; height: 100%;"></div>
                        </div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>‚ö†Ô∏è Alerts & Recommendations</h3>
                    <p>Smart suggestions to improve your profitability</p>
                    <div style="background: rgba(215, 48, 39, 0.1); padding: 15px; border-radius: 8px; margin: 1rem 0;">
                        <strong style="color: var(--error-red);">Cost exceeds profit alert!</strong><br>
                        <small>Consider: Renegotiate price ‚Ä¢ Reduce inputs ‚Ä¢ Better storage timing</small>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">View Suggestions</button>
                        <button class="action-btn">Set Price Alerts</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cyber Safety Screen -->
    <div id="cyber" class="screen">
        <div class="container" style="padding-top: 2rem;">
            <h2 style="color: var(--cream); margin-bottom: 2rem;">Cyber Safety & Fraud Protection / ‡§∏‡§æ‡§á‡§¨‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h3>üéØ Spot the Scam / ‡§ò‡•ã‡§ü‡§æ‡§≤‡§æ ‡§™‡§π‡§ö‡§æ‡§®‡•á‡§Ç</h3>
                    <p>Practice identifying fake messages and scam attempts</p>
                    <div style="background: var(--sand); padding: 15px; border-radius: 8px; margin: 1rem 0; border: 2px dashed var(--border-light);color: var(--deep-brown);">
                        <strong>Practice Scenario:</strong><br>
                        <em>"Congratulations! You've won ‚Çπ50,000 in PM-Kisan lottery. Send ‚Çπ500 processing fee to claim."</em><br><br>
                        Is this SAFE or SCAM?
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn" onclick="scamChoice('safe')" style="background: var(--success-olive); color: var(--cream);">Safe</button>
                        <button class="action-btn" onclick="scamChoice('scam')" style="background: var(--error-red); color: var(--cream);">Scam</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>‚úÖ Verify UPI / ‡§Ø‡•Ç‡§™‡•Ä‡§Ü‡§à ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§®</h3>
                    <p>Check if UPI IDs and payment requests are legitimate</p>
                    <div class="form-group">
                        <input type="text" class="form-input" placeholder="Enter UPI ID to verify" id="upiInput">
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary" onclick="verifyUPIID()">Verify</button>
                        <button class="action-btn">QR Code Scanner</button>
                    </div>
                    <div id="upiResult" class="hidden" style="margin-top: 1rem; padding: 10px; border-radius: 8px;"></div>
                </div>

                <div class="feature-card">
                    <h3>üì± Mobile Safety Course / ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</h3>
                    <p>5-day micro-lessons to keep your mobile and money safe</p>
                    <div style="margin: 1rem 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Progress: Day 3/5</span>
                            <span style="background: var(--success-olive); color: var(--cream); padding: 4px 8px; border-radius: 12px; font-size: 12px;">60%</span>
                        </div>
                        <div style="background: var(--sand); height: 8px; border-radius: 4px; overflow: hidden; margin-top: 0.5rem;">
                            <div style="background: var(--success-olive); width: 60%; height: 100%;"></div>
                        </div>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Continue Learning</button>
                        <button class="action-btn">Daily Reminders</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üåê Protected Browser / ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞</h3>
                    <p>Safe browsing with automatic fraud site blocking</p>
                    <div style="background: rgba(107, 138, 76, 0.1); padding: 15px; border-radius: 8px; margin: 1rem 0; color: var(--deep-brown);">
                        <div style="color: var(--success-olive); font-weight: 600;">‚úÖ Safe Site Detected</div>
                        <small>This government website is verified and safe to use</small>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Open Protected Browser</button>
                        <button class="action-btn">View Blocked Sites</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Community Screen -->
    <div id="community" class="screen">
        <div class="container" style="padding-top: 2rem;">
            <h2 style="color: var(--cream); margin-bottom: 2rem;">Community & Knowledge Exchange / ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h3>‚ùì Ask a Question / ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç</h3>
                    <p>Get help from fellow farmers and experts</p>
                    <div class="form-group">
                        <textarea class="form-input" rows="3" placeholder="Type your farming question here... / ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">üé§ Voice Question</button>
                        <button class="action-btn">üì∑ Add Photo</button>
                        <button class="action-btn">Post Question</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üçÉ Upload Disease Photo / ‡§∞‡•ã‡§ó ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§°</h3>
                    <p>Upload plant photos for disease identification</p>
                    <div style="background: var(--sand); padding: 40px; text-align: center; border-radius: 12px; border: 2px dashed var(--border-light); margin: 1rem 0;">
                        <span style="font-size: 3rem;">üì∑</span><br>
                        <span style="color: var(--muted-taupe);">Tap to upload plant photo</span>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">üì± Camera</button>
                        <button class="action-btn">üìÅ Gallery</button>
                        <button class="action-btn">üí° Low-light Tips</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üå§Ô∏è Weather & Alerts / ‡§Æ‡•å‡§∏‡§Æ ‡§Ö‡§≤‡§∞‡•ç‡§ü</h3>
                    <p>Get weather updates and satellite-based farming alerts</p>
                    <div style="background: linear-gradient(135deg, #87CEEB, #4682B4); color: white; padding: 20px; border-radius: 12px; margin: 1rem 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 2rem;">‚õÖ 28¬∞C</div>
                                <div>Partly Cloudy</div>
                            </div>
                            <div style="text-align: right;">
                                <div>Rain Expected</div>
                                <div style="font-weight: 600;">Tomorrow 60%</div>
                            </div>
                        </div>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Bhuvan Alerts</button>
                        <button class="action-btn">7-day Forecast</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üë®‚Äçüåæ Weekly Expert Q&A / ‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û</h3>
                    <p>Join live sessions with agricultural experts</p>
                    <div style="background: rgba(107, 138, 76, 0.1); padding: 15px; border-radius: 8px; margin: 1rem 0; color: var(--deep-brown);">
                        <strong style="color: var(--success-olive);">Next Session:</strong><br>
                        <span>Organic Farming Techniques</span><br>
                        <small>Tomorrow 6:00 PM ‚Ä¢ Dr. Rajesh Kumar</small>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Set Reminder</button>
                        <button class="action-btn">Follow Post</button>
                        <button class="action-btn">Past Sessions</button>
                    </div>
                </div>
            </div>

            <!-- Recent Community Posts -->
            <div style="margin-top: 2rem;">
                <h3 style="color: var(--cream); margin-bottom: 1rem;">Recent Community Posts / ‡§π‡§æ‡§≤ ‡§ï‡•Ä ‡§™‡•ã‡§∏‡•ç‡§ü</h3>
                
                <div class="feature-card">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
                        <div style="width: 40px; height: 40px; background: var(--terracotta); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--cream); font-weight: bold;">R</div>
                        <div>
                            <strong>Ramesh Singh</strong><br>
                            <small style="color: var(--muted-taupe);">2 hours ago</small>
                        </div>
                    </div>
                    <p>My tomato plants are showing yellow spots. Is this a disease? Any organic treatment suggestions?</p>
                    <div style="display: flex; gap: 15px; margin-top: 10px; color: var(--muted-taupe); font-size: 14px;">
                        <span>üëç 12 likes</span>
                        <span>üí¨ 5 replies</span>
                        <span>üì∑ 3 photos</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- eLocker Screen -->
    <div id="elocker" class="screen">
        <div class="container" style="padding-top: 2rem;">
            <h2 style="color: var(--cream); margin-bottom: 2rem;">eLocker - Secure Document Vault / ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h3>üì§ Upload / ‡§Ö‡§™‡§≤‡•ã‡§°</h3>
                    <p>Securely store your important documents</p>
                    <div style="background: var(--sand); padding: 40px; text-align: center; border-radius: 12px; border: 2px dashed var(--border-light); margin: 1rem 0;">
                        <span style="font-size: 3rem;">üìÑ</span><br>
                        <span style="color: var(--muted-taupe);">Drag & drop or click to upload</span>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Upload Document</button>
                        <button class="action-btn">Bulk Upload</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üíæ My Documents / ‡§Æ‡•á‡§∞‡•á ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º</h3>
                    <p>Access your stored documents anytime</p>
                    <div style="margin: 1rem 0;">
                        <div style="display: flex;color: var(--deep-brown); justify-content: space-between; align-items: center; padding: 10px; background: var(--sand); border-radius: 8px; margin-bottom: 8px;">
                            <span>üìÑ Aadhaar Card</span>
                            <div>
                                <button class="action-btn" style="padding: 4px 8px; margin-right: 5px;">Download (Watermarked)</button>
                                <button class="action-btn" style="padding: 4px 8px;">Share</button>
                            </div>
                        </div>
                        <div style="display: flex;color: var(--deep-brown); justify-content: space-between; align-items: center; padding: 10px; background: var(--sand); border-radius: 8px; margin-bottom: 8px;">
                            <span>üè† Land Records</span>
                            <div>
                                <button class="action-btn" style="padding: 4px 8px; margin-right: 5px;">Download (Watermarked)</button>
                                <button class="action-btn" style="padding: 4px 8px;">Share</button>
                            </div>
                        </div>
                        <div style="display: flex; color: var(--deep-brown); justify-content: space-between; align-items: center; padding: 10px; background: var(--sand); border-radius: 8px;">
                            <span>üåæ Soil Health Card</span>
                            <div>
                                <span style="background: var(--success-olive); color: var(--cream); padding: 2px 6px; border-radius: 10px; font-size: 12px; margin-right: 10px;">Synced</span>
                                <button class="action-btn" style="padding: 4px 8px;">View</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>ü§ù Share with Officer / ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç</h3>
                    <p>Securely share documents with government officials</p>
                    <div class="form-group">
                        <label class="form-label">Officer ID / ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§Ü‡§à‡§°‡•Ä</label>
                        <input type="text" class="form-input" placeholder="Enter officer verification ID">
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Share with Officer</button>
                        <button class="action-btn">Generate QR</button>
                        <button class="action-btn">View Share Logs</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>‚úÖ Mark as Verified / ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§ö‡§ø‡§π‡•ç‡§®‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç</h3>
                    <p>For authorized verifiers only</p>
                    <div style="background: rgba(107, 138, 76, 0.1); padding: 15px; border-radius: 8px; margin: 1rem 0; color: var(--deep-brown);">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="color: var(--success-olive); font-size: 1.5rem;">‚úì</span>
                            <div>
                                <strong style="color: var(--success-olive);">Document Verified</strong><br>
                                <small>Verified by: Agriculture Officer, Bengaluru</small>
                            </div>
                        </div>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Mark as Verified</button>
                        <button class="action-btn">Verification History</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings" class="screen">
        <div class="container" style="padding-top: 2rem;">
            <h2 style="color: var(--cream); margin-bottom: 2rem;">Settings / ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h3>üîä Voice & SMS Settings / ‡§Ü‡§µ‡§æ‡§ú ‡§î‡§∞ ‡§è‡§∏‡§è‡§Æ‡§è‡§∏</h3>
                    <p>Configure voice assistance and SMS notifications</p>
                    <div style="margin: 1rem 0;">
                        <label style="display: flex; color: var(--deep-brown); align-items: center; gap: 10px; margin-bottom: 15px; cursor: pointer;">
                            <input type="checkbox" checked style="transform: scale(1.2);">
                            <span>Voice Instructions / ‡§Ü‡§µ‡§æ‡§ú ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂</span>
                        </label>
                        <label style="display: flex; color: var(--deep-brown); align-items: center; gap: 10px; margin-bottom: 15px; cursor: pointer;">
                            <input type="checkbox" checked style="transform: scale(1.2);">
                            <span>Use via SMS / ‡§è‡§∏‡§è‡§Æ‡§è‡§∏ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç</span>
                        </label>
                        <label style="display: flex; color: var(--deep-brown); align-items: center; gap: 10px; margin-bottom: 15px; cursor: pointer;">
                            <input type="checkbox" checked style="transform: scale(1.2);">
                            <span>Enable Offline Mode / ‡§ë‡§´‡§≤‡§æ‡§á‡§® ‡§Æ‡•ã‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡•á‡§Ç</span>
                        </label>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Test Voice</button>
                        <button class="action-btn">Call Support</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üåê Language Preferences / ‡§≠‡§æ‡§∑‡§æ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ‡§è‡§Ç</h3>
                    <p>Choose your preferred language for the app</p>
                    <div style="margin: 1rem 0;">
                        <select class="form-input" style="margin-bottom: 15px;">
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
                            <option value="en">English</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                        </select>
                        
                        <div style="background: var(--sand); padding: 15px; color: var(--deep-brown); border-radius: 8px;">
                            <strong>Voice Preview:</strong><br>
                            <button class="action-btn" onclick="playVoicePreview()" style="margin-top: 10px;">üîä "‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å"</button>
                        </div>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Save Preferences</button>
                        <button class="action-btn">Reset to Default</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üì± App Preferences / ‡§ê‡§™ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ‡§è‡§Ç</h3>
                    <p>Customize your app experience</p>
                    <div style="margin: 1rem 0; color: var(--deep-brown);">
                        <label style="display: flex; color: var(--deep-brown); align-items: center; gap: 10px; margin-bottom: 15px; cursor: pointer;">
                            <input type="checkbox" checked style="transform: scale(1.2);">
                            <span>Push Notifications / ‡§™‡•Å‡§∂ ‡§®‡•ã‡§ü‡§ø‡§´‡§ø‡§ï‡•á‡§∂‡§®</span>
                        </label>
                        
                        <label style="display: flex; color:var(--deep-brown) center; gap: 10px; margin-bottom: 15px; cursor: pointer;">
                            <input type="checkbox" checked style="transform: scale(1.2);">
                            <span>Auto-sync Data / ‡§ë‡§ü‡•ã-‡§∏‡§ø‡§Ç‡§ï ‡§°‡•á‡§ü‡§æ</span>
                        </label>
                    </div>
                    
                    <div style="background: var(--sand);color: var(--deep-brown ); padding: 15px; border-radius: 8px; margin: 1rem 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>üì± PWA Installed</span>
                            <span style="color: var(--success-olive); font-weight: 600;">‚úì</span>
                        </div>
                        <div style="display: flex; color:var(--deep-brown) ;justify-content: space-between; align-items: center;">
                            <span>üîÑ Sync complete</span>
                            <span style="color: var(--success-olive); font-weight: 600;">‚úì</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>üì° Offline</span>
                            <span style="color: var(--muted-taupe);">Ready</span>
                        </div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üìª Alternative Access / ‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö</h3>
                    <p>Access information when internet is not available</p>
                    <div style="background: var(--sand); padding: 15px; border-radius: 8px; margin: 1rem 0;  color: var(--deep-brown);">
                        <strong>No internet? Get info via radio</strong><br>
                        <small>üìª AIR Bengaluru - 1566 AM ‚Ä¢ Daily 6:30 PM</small><br>
                        <small>Farm advisory and market prices</small>
                    </div>
                    <div class="feature-actions">
                        <button class="action-btn primary">Set Reminders</button>
                        <button class="action-btn">Find Local Stations</button>
                        <button class="action-btn">SMS Helpline</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar (for marketplace) -->
    <div class="cart-overlay" id="cartOverlay" onclick="closeCart()"></div>
    <div class="cart-sidebar" id="cartSidebar" style="position: fixed; right: -400px; top: 0; width: 400px; height: 100vh; background: var(--cream); box-shadow: -5px 0 15px rgba(122, 92, 58, 0.2); transition: right 0.3s ease; z-index: 1000; display: flex; flex-direction: column;">
        <div style="padding: 20px; border-bottom: 2px solid var(--border-light); display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0; color: var(--primary-brown);">Your Cart / ‡§Ü‡§™‡§ï‡•Ä ‡§ó‡§æ‡§°‡§º‡•Ä</h2>
            <button onclick="closeCart()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--muted-taupe);">‚úï</button>
        </div>
        
        <div id="cartItems" style="flex: 1; overflow-y: auto; padding: 20px;">
            <div style="text-align: center; padding: 40px 20px; color: var(--muted-taupe);">
                <div style="font-size: 4rem; margin-bottom: 20px;">üõí</div>
                <p>Your cart is empty / ‡§Ü‡§™‡§ï‡•Ä ‡§ó‡§æ‡§°‡§º‡•Ä ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à</p>
            </div>
        </div>
        
        <div id="cartTotal" class="hidden" style="padding: 20px; border-top: 2px solid var(--border-light); background: var(--sand);">
            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 15px; color: var(--primary-brown);">
                Total: ‚Çπ<span id="totalAmount">0.00</span>
            </div>
            <button onclick="checkout()" style="width: 100%; background: var(--primary-brown); color: var(--cream); border: none; padding: 15px; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                Proceed to Checkout / ‡§ö‡•á‡§ï‡§Ü‡§â‡§ü ‡§ï‡§∞‡•á‡§Ç
            </button>
        </div>
    </div>

    <script>
       
const products = [
    {
        id: 1,
        name: "‡§™‡§æ‡§≤‡§ï / Spinach",
        price: 25,
        unit: "per KG",
        emoji: "ü•¨",
        category: "leafy",
        description: "Fresh organic spinach, rich in iron and vitamins"
    },
    {
        id: 2,
        name: "‡§ó‡§æ‡§ú‡§∞ / Carrots",
        price: 40,
        unit: "per KG",
        emoji: "ü•ï",
        category: "root",
        description: "Sweet, crunchy carrots grown without pesticides"
    },
    {
        id: 3,
        name: "‡§ü‡§Æ‡§æ‡§ü‡§∞ / Tomatoes",
        price: 30,
        unit: "per KG",
        emoji: "üçÖ",
        category: "fruit",
        description: "Juicy red tomatoes, ideal for cooking and sauces"
    },
    {
        id: 4,
        name: "‡§¨‡•à‡§Ç‡§ó‡§® / Eggplant",
        price: 35,
        unit: "per KG",
        emoji: "üçÜ",
        category: "herbs",
        description: "Fresh brinjal for your cooking needs"
    },
    {
        id: 5,
        name: "‡§™‡§§‡•ç‡§§‡§æ ‡§ó‡•ã‡§≠‡•Ä / Cabbage",
        price: 20,
        unit: "per KG",
        emoji: "ü•¨",
        category: "leafy",
        description: "Fresh cabbage heads, rich in vitamins and minerals"
    },
    {
        id: 6,
        name: "‡§Æ‡§ø‡§∞‡•ç‡§ö / Chilli",
        price: 60,
        unit: "per KG",
        emoji: "üå∂Ô∏è",
        category: "fruit",
        description: "Hot green chillies for adding spice to your dishes"
    },
    {
        id: 7,
        name: "‡§Ü‡§≤‡•Ç / Potatoes",
        price: 30,
        unit: "per KG",
        emoji: "ü•î",
        category: "root",
        description: "Fresh potatoes, perfect for all cooking methods"
    },
    {
        id: 8,
        name: "‡§™‡•ç‡§Ø‡§æ‡§ú / Onion",
        price: 25,
        unit: "per KG",
        emoji: "üßÖ",
        category: "herbs",
        description: "Fresh onions to add flavor to your dishes"
    }
];

// Global state
let currentScreen = 'landing';
let currentLanguage = 'hi';
let voiceEnabled = true;
let cart = [];
let currentFilter = 'all';
let isLoggedIn = false;
let otpTimer = null;
let resendCountdown = 30;

// Language translations
const translations = {
    hi: {
        startNow: 'Start Now',
        seeHow: 'See How It Works',
        tagline: '‡§∏‡§∞‡§≤. ‡§≠‡§∞‡•ã‡§∏‡•á‡§Æ‡§Ç‡§¶. ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è.',
        greeting: '‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§∞‡§Æ‡•Ç ‡§≠‡•à‡§Ø‡§æ!',
        searchPlaceholder: 'Search crops... / ‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç...'
    },
    en: {
        startNow: 'Start Now',
        seeHow: 'See How It Works',
        tagline: 'Simple. Reliable. For You.',
        greeting: 'Hello Ramu Bhaiya!',
        searchPlaceholder: 'Search crops...'
    }
};

// Utility functions
function showToast(message, isError = false) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = `toast show ${isError ? 'error' : ''}`;
    setTimeout(() => {
        toast.className = 'toast';
    }, 3000);
}

function playSound(type) {
    // Simulate sound effects
    console.log(`Playing ${type} sound`);
}

// Screen management
function showScreen(screenName) {
    // Hide all screens
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });
    
    // Show selected screen
    document.getElementById(screenName).classList.add('active');
    
    // Update navigation
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[onclick="showScreen('${screenName}')"]`)?.classList.add('active');
    
    currentScreen = screenName;
    
    // Initialize screen-specific content
    if (screenName === 'marketplace') {
        renderProducts();
    }
    
    playSound('navigate');
}

// Language management
function setLanguage(lang) {
    currentLanguage = lang;
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[onclick="setLanguage('${lang}')"]`).classList.add('active');
    
    // Update content based on language
    updateContent();
    showToast(`Language changed to ${lang.toUpperCase()}`);
}

function updateContent() {
    const trans = translations[currentLanguage] || translations['hi'];
    // Update UI elements with translations
    // This would be expanded for full internationalization
}

// Voice functionality
function toggleVoice() {
    voiceEnabled = !voiceEnabled;
    const status = document.getElementById('voiceStatus');
    status.textContent = voiceEnabled ? 'Voice ON' : 'Voice OFF';
    showToast(`Voice assistant ${voiceEnabled ? 'enabled' : 'disabled'}`);
}

function startVoiceInput() {
    const voiceBot = document.getElementById('voiceBot');
    voiceBot.classList.add('listening');
    
    // Simulate voice recognition
    setTimeout(() => {
        voiceBot.classList.remove('listening');
        showToast('Voice input received');
    }, 2000);
}

// Login functionality
function startLogin() {
    if (isLoggedIn) {
        showScreen('dashboard');
    } else {
        showScreen('otp-login');
    }
}

function validatePhone() {
    const phone = document.getElementById('phoneInput').value;
    const getOtpBtn = document.getElementById('getOtpBtn');
    
    if (phone.length === 10 && /^\d+$/.test(phone)) {
        getOtpBtn.disabled = false;
        getOtpBtn.style.opacity = '1';
    } else {
        getOtpBtn.disabled = true;
        getOtpBtn.style.opacity = '0.6';
    }
}

function sendOTP() {
    const phone = document.getElementById('phoneInput').value;
    if (phone.length !== 10) {
        showToast('Please enter a valid 10-digit mobile number', true);
        return;
    }
    
    document.getElementById('otpSection').classList.remove('hidden');
    startResendTimer();
    showToast('OTP sent successfully!');
    
    // Auto-focus first OTP box
    document.querySelector('.otp-box').focus();
}

function moveToNext(current, nextIndex) {
    if (current.value.length === 1 && nextIndex <= 6) {
        const nextInput = document.querySelectorAll('.otp-box')[nextIndex - 1];
        if (nextInput) {
            nextInput.focus();
        }
    }
    
    // Check if all OTP boxes are filled
    const otpBoxes = document.querySelectorAll('.otp-box');
    const allFilled = Array.from(otpBoxes).every(box => box.value.length === 1);
    
    if (allFilled) {
        verifyOTP();
    }
}

function startResendTimer() {
    resendCountdown = 30;
    const timerElement = document.getElementById('resendTimer');
    const resendBtn = document.getElementById('resendBtn');
    
    timerElement.classList.remove('hidden');
    resendBtn.classList.add('hidden');
    
    otpTimer = setInterval(() => {
        resendCountdown--;
        timerElement.textContent = `Resend OTP in ${resendCountdown}s`;
        
        if (resendCountdown <= 0) {
            clearInterval(otpTimer);
            timerElement.classList.add('hidden');
            resendBtn.classList.remove('hidden');
        }
    }, 1000);
}

function resendOTP() {
    startResendTimer();
    showToast('OTP resent successfully!');
}

function callForOTP() {
    showToast('You will receive a call with OTP shortly');
}

function verifyOTP() {
    const otpBoxes = document.querySelectorAll('.otp-box');
    const otp = Array.from(otpBoxes).map(box => box.value).join('');
    
    if (otp.length !== 6) {
        showToast('Please enter complete OTP', true);
        return;
    }
    
    // Simulate OTP verification
    if (otp === '123456' || otp.length === 6) {
        isLoggedIn = true;
        showToast('Login successful! Welcome to Navi Soch');
        setTimeout(() => {
            showScreen('dashboard');
        }, 1000);
    } else {
        showToast('Invalid OTP. Please try again.', true);
    }
}

// Marketplace functionality
function renderProducts() {
    const grid = document.getElementById('productsGrid');
    const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
    
    const filteredProducts = products.filter(product => {
        const matchesCategory = currentFilter === 'all' || product.category === currentFilter;
        const matchesSearch = product.name.toLowerCase().includes(searchTerm);
        return matchesCategory && matchesSearch;
    });

    grid.innerHTML = filteredProducts.map(product => `
        <div class="product-card">
            <div class="product-image">
                ${product.emoji}
                <div class="product-badge">Fresh</div>
            </div>
            <div class="product-info">
                <h3>${product.name}</h3>
                <p class="product-description">${product.description}</p>
                <div class="product-price">
                    ‚Çπ${product.price.toFixed(2)} <span class="price-unit">${product.unit}</span>
                </div>
                <div class="product-controls">
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="changeQuantity(${product.id}, -1)">-</button>
                        <span class="quantity-display" id="qty-${product.id}">1</span>
                        <button class="quantity-btn" onclick="changeQuantity(${product.id}, 1)">+</button>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(${product.id})">
                        Add to Cart
                    </button>
                </div>
            </div>
        </div>
    `).join('');
}

function filterProducts(category) {
    currentFilter = category;
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    renderProducts();
}

function changeQuantity(productId, change) {
    const qtyElement = document.getElementById(`qty-${productId}`);
    let currentQty = parseInt(qtyElement.textContent);
    currentQty = Math.max(1, currentQty + change);
    qtyElement.textContent = currentQty;
}

function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    const quantity = parseInt(document.getElementById(`qty-${productId}`).textContent);
    
    const existingItem = cart.find(item => item.id === productId);
    if (existingItem) {
        existingItem.quantity += quantity;
    } else {
        cart.push({
            ...product,
            quantity: quantity
        });
    }
    
    updateCartDisplay();
    document.getElementById(`qty-${productId}`).textContent = '1';
    showToast(`${product.name.split(' / ')[0]} added to cart!`);
    
    // Cart animation
    const cartBtn = document.querySelector('.cart-btn');
    cartBtn.style.transform = 'scale(1.2)';
    setTimeout(() => {
        cartBtn.style.transform = 'scale(1)';
    }, 200);
}

function updateCartDisplay() {
    const cartCount = document.getElementById('cartCount');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    const totalAmount = document.getElementById('totalAmount');
    
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCount.textContent = totalItems;
    cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
    
    if (cart.length === 0) {
        cartItems.innerHTML = `
            <div style="text-align: center; padding: 40px 20px; color: var(--muted-taupe);">
                <div style="font-size: 4rem; margin-bottom: 20px;">üõí</div>
                <p>Your cart is empty / ‡§Ü‡§™‡§ï‡•Ä ‡§ó‡§æ‡§°‡§º‡•Ä ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à</p>
            </div>
        `;
        cartTotal.classList.add('hidden');
    } else {
        cartItems.innerHTML = cart.map(item => `
            <div style="display: flex; align-items: center; gap: 15px; padding: 15px 0; border-bottom: 1px solid var(--border-light);">
                <div style="font-size: 2rem; width: 60px; height: 60px; background: var(--sand); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                    ${item.emoji}
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: 600; margin-bottom: 5px; color: var(--text-dark);">${item.name.split(' / ')[0]}</div>
                    <div style="color: var(--success-olive); font-weight: 600;">‚Çπ${(item.price * item.quantity).toFixed(2)}</div>
                </div>
                <div class="quantity-controls">
                    <button class="quantity-btn" onclick="updateCartQuantity(${item.id}, ${item.quantity - 1})">-</button>
                    <span class="quantity-display">${item.quantity}</span>
                    <button class="quantity-btn" onclick="updateCartQuantity(${item.id}, ${item.quantity + 1})">+</button>
                </div>
            </div>
        `).join('');
        
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        totalAmount.textContent = total.toFixed(2);
        cartTotal.classList.remove('hidden');
    }
}

function updateCartQuantity(productId, newQuantity) {
    if (newQuantity <= 0) {
        cart = cart.filter(item => item.id !== productId);
    } else {
        const item = cart.find(item => item.id === productId);
        if (item) {
            item.quantity = newQuantity;
        }
    }
    updateCartDisplay();
}

function toggleCart() {
    const sidebar = document.getElementById('cartSidebar');
    const overlay = document.getElementById('cartOverlay');
    
    if (sidebar.style.right === '0px') {
        closeCart();
    } else {
        sidebar.style.right = '0px';
        overlay.style.opacity = '1';
        overlay.style.visibility = 'visible';
    }
}

function closeCart() {
    const sidebar = document.getElementById('cartSidebar');
    const overlay = document.getElementById('cartOverlay');
    
    sidebar.style.right = '-400px';
    overlay.style.opacity = '0';
    overlay.style.visibility = 'hidden';
}

function checkout() {
    if (cart.length === 0) return;
    
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    showToast(`Order placed successfully! Total: ‚Çπ${total.toFixed(2)}`);
    
    cart = [];
    updateCartDisplay();
    closeCart();
}

// Feature functions
function showDemo() {
    showToast('Demo video will open shortly');
}

function addNewCrop() {
    showToast('Add new crop wizard opening...');
}

function showSmartPrice() {
    showToast('Smart price analysis with APMC/eNAM data');
}

function bookTransport() {
    showToast('Transport booking system opening...');
}

function coldStorage() {
    showToast('Cold storage booking available');
}

function digitalContract() {
    showToast('Digital contract generator opening...');
}

function applyScheme() {
    showToast('Government scheme application form opening...');
}

function trackApplication() {
    showToast('Application tracking system loading...');
}

function learnRights() {
    showToast('Legal rights learning module opening...');
}

function reportScam() {
    showToast('Scam reporting form opening...');
}

function compareLoans() {
    showToast('Loan comparison tool opening...');
}

function savingsLessons() {
    showToast('Financial literacy lessons starting...');
}

function verifyUPIID() {
    const upiInput = document.getElementById('upiInput');
    const upiResult = document.getElementById('upiResult');
    
    if (!upiInput || !upiInput.value) {
        showToast('Please enter UPI ID to verify', true);
        return;
    }
    
    // Simulate UPI verification
    const isValid = upiInput.value.includes('@') && upiInput.value.length > 5;
    
    upiResult.innerHTML = `
        <div style="background: ${isValid ? 'rgba(107, 138, 76, 0.1)' : 'rgba(215, 48, 39, 0.1)'}; color: ${isValid ? 'var(--success-olive)' : 'var(--error-red)'}; padding: 15px; border-radius: 8px;">
            <strong>${isValid ? '‚úÖ Valid UPI ID' : '‚ùå Invalid UPI ID'}</strong><br>
            <small>${isValid ? 'This UPI ID is verified and safe to use' : 'This UPI ID appears to be invalid or suspicious'}</small>
        </div>
    `;
    upiResult.classList.remove('hidden');
}

function scamChoice(choice) {
    const isCorrect = choice === 'scam';
    showToast(isCorrect ? 
        '‚úÖ Correct! This is a scam. Government never asks for fees to claim benefits.' : 
        '‚ùå This is actually a scam. Government schemes are free and never ask for processing fees.',
        !isCorrect
    );
}

function safetyCourse() {
    showToast('Mobile safety course starting...');
}

function protectedBrowser() {
    showToast('Protected browser opening with fraud site blocking...');
}

function uploadDiseasePhoto() {
    showToast('Camera opening for plant disease detection...');
}

function weatherAlerts() {
    showToast('Weather and Bhuvan satellite alerts loading...');
}

function expertQA() {
    showToast('Weekly expert Q&A session details loading...');
}

function playVoicePreview() {
    showToast('üîä ‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å');
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    // Phone input validation
    const phoneInput = document.getElementById('phoneInput');
    if (phoneInput) {
        phoneInput.addEventListener('input', validatePhone);
    }
    
    // Search functionality
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
        searchInput.addEventListener('input', renderProducts);
    }
    
    // Voice bot click handler
    document.getElementById('voiceBot').addEventListener('click', function() {
        const phrases = [
            'Apply for Fasal Bima',
            '‡§Ü‡§ú ‡§ï‡§æ ‡§¶‡§æ‡§Æ ‡§¶‡§ø‡§ñ‡§æ‡§ì',
            'UPI verify ‡§ï‡§∞‡•ã',
            'Weather update chahiye',
            'Loan ke baare mein batao'
        ];
        
        const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
        showToast(`Voice command: "${randomPhrase}"`);
        
        // Simulate voice command processing
        this.classList.add('listening');
        setTimeout(() => {
            this.classList.remove('listening');
            
            if (randomPhrase.includes('‡§¶‡§æ‡§Æ') || randomPhrase.includes('price')) {
                showScreen('marketplace');
            } else if (randomPhrase.includes('Fasal')) {
                showScreen('legal');
            } else if (randomPhrase.includes('UPI')) {
                showScreen('cyber');
            } else if (randomPhrase.includes('Weather')) {
                showScreen('community');
            } else if (randomPhrase.includes('Loan')) {
                showScreen('finance');
            }
        }, 2000);
    });
    
    // Initialize cart display
    updateCartDisplay();
    
    // PWA installation prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        // Show install prompt after a delay
        setTimeout(() => {
            if (deferredPrompt) {
                showToast('Install Navi Soch app for offline access!');
            }
        }, 5000);
    });
});

// PWA Service Worker Registration (simulated)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        // Simulate service worker registration
        console.log('Service Worker registered for offline functionality');
        showToast('App ready for offline use!');
    });
}

// Responsive cart for mobile
window.addEventListener('resize', function() {
    const cartSidebar = document.getElementById('cartSidebar');
    if (window.innerWidth <= 768) {
        cartSidebar.style.width = '100%';
    } else {
        cartSidebar.style.width = '400px';
    }
});

// Keyboard navigation support
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeCart();
    }
    
    // Alt + number keys for quick navigation
    if (e.altKey) {
        switch(e.key) {
            case '1': showScreen('landing'); break;
            case '2': showScreen('marketplace'); break;
            case '3': showScreen('legal'); break;
            case '4': showScreen('finance'); break;
            case '5': showScreen('cyber'); break;
            case '6': showScreen('community'); break;
            case '7': showScreen('elocker'); break;
            case '8': showScreen('settings'); break;
        }
    }
});

// Simulate offline/online status
function updateOnlineStatus() {
    const isOnline = navigator.onLine;
    const statusIndicator = document.querySelector('.trust-chip');
    
    if (!isOnline) {
        showToast('You are offline. App functionality available via PWA mode.', true);
        // Show offline banner
        const offlineBanner = document.createElement('div');
        offlineBanner.style.cssText = `
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            background: var(--error-red); 
            color: white; 
            text-align: center; 
            padding: 10px; 
            z-index: 1002;
            font-size: 14px;
        `;
        offlineBanner.textContent = 'üì° Offline Mode - Limited functionality available';
        offlineBanner.id = 'offline-banner';
        document.body.appendChild(offlineBanner);
    } else {
        const banner = document.getElementById('offline-banner');
        if (banner) {
            banner.remove();
        }
        showToast('Back online! Full functionality restored.');
    }
}

window.addEventListener('online', updateOnlineStatus);
window.addEventListener('offline', updateOnlineStatus);

// Accessibility improvements
function announceForScreenReader(message) {
    const announcement = document.createElement('div');
    announcement.setAttribute('aria-live', 'polite');
    announcement.setAttribute('aria-atomic', 'true');
    announcement.style.position = 'absolute';
    announcement.style.left = '-10000px';
    announcement.style.width = '1px';
    announcement.style.height = '1px';
    announcement.style.overflow = 'hidden';
    announcement.textContent = message;
    document.body.appendChild(announcement);
    
    setTimeout(() => {
        document.body.removeChild(announcement);
    }, 1000);
}

// Enhanced voice commands simulation
const voiceCommands = {
    'market': () => showScreen('marketplace'),
    '‡§¨‡§æ‡§ú‡§æ‡§∞': () => showScreen('marketplace'),
    'legal': () => showScreen('legal'),
    '‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä': () => showScreen('legal'),
    'finance': () => showScreen('finance'),
    '‡§µ‡§ø‡§§‡•ç‡§§': () => showScreen('finance'),
    'cyber': () => showScreen('cyber'),
    '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ': () => showScreen('cyber'),
    'community': () => showScreen('community'),
    '‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø': () => showScreen('community'),
    'settings': () => showScreen('settings'),
    '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏': () => showScreen('settings'),
    'home': () => showScreen('landing'),
    '‡§ò‡§∞': () => showScreen('landing')
};

// Simulate geolocation for farmer location
function detectLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (position) => {
                console.log('Location detected:', position.coords);
                showToast('Location detected: Bengaluru, Karnataka');
            },
            (error) => {
                console.log('Location detection failed:', error);
                showToast('Using default location: Bengaluru, Karnataka');
            }
        );
    }
}

// Initialize app
function initializeApp() {
    detectLocation();
    updateOnlineStatus();
    
    // Show welcome message after a short delay
    setTimeout(() => {
        if (!isLoggedIn) {
            showToast('Welcome to Navi Soch! Your farming assistant is ready.');
        }
    }, 2000);
    
    // Preload critical resources
    const criticalScreens = ['otp-login', 'dashboard', 'marketplace'];
    criticalScreens.forEach(screen => {
        const element = document.getElementById(screen);
        if (element) {
            element.style.display = 'none';
            element.style.display = '';
        }
    });
}

// Start the app
initializeApp();

// Export functions for testing (in real app, these would be properly modularized)
window.NaviSoch = {
    showScreen,
    setLanguage,
    toggleVoice,
    sendOTP,
    verifyOTP,
    addToCart,
    checkout,
    updateCartDisplay,
    showToast
};
    </script>
</body>
</html>"